
@model  IEnumerable<mvc.Models.ClientGrid>
@using PagedList;
@using PagedList.Mvc;
@using GridMvc.Html

<script src="~/Scripts/toastr.js"></script>
<script src="~/Scripts/toastr.min.js"></script>
<link href="~/assets/css/plugins/toastr/toastr.css" rel="stylesheet" />
<script src="~/assets/css/plugins/toastr/toastr.min.js"></script>

<div class="gridSystem paddingTop15">
    <table class="table table-hover" id="clientlist">
        @foreach (var item in Model)
        {
            <tr class="cleintlist clickable-row" id="@item.client_id">
                <td>
                    <div class="checkbox marginTop0 marginBottom0">
                        <label class="paddingLeft0">
                            <input type="checkbox" class="clientcheck" value="@item.client_id">
                            <span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span>
                        </label>

                    </div>
                </td>
                <td class="hidden ">@item.client_id</td>
                <td width="70%">@item.Client_Name</td>
                <!--<td><i class="glyphicon glyphicon-envelope"></i> Email id</td>-->
                <td>
                    @{
                        if (item.BuisinessType == "Executive")
                        {
                            <span class="label label-success">@item.BuisinessType</span>
                        }
                        else if (item.BuisinessType == "Staffing")
                        {
                            <span class="label label-warning">@item.BuisinessType</span>
                        }
                        else if (item.BuisinessType == "Total Industrial Solutions")
                        {
                            <span class="label label-danger">@item.BuisinessType</span>
                        }
                        else
                        {
                            <span class="label label-primary">@item.BuisinessType</span>
                        }
                    }
                </td>
            </tr>
        }

    </table>
</div>

<div class="row" style="margin-bottom: -25px;">
    <div class="col-lg-12">
        <div class="pnl-pagination m-b-md1">
            <div class="pull-left">
                @Html.PagedListPager((IPagedList)Model, page => Url.Action("IndexForBusinessDev", "BussinessDev", new { page }), PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new PagedListRenderOptions() { MaximumPageNumbersToDisplay = 2, DisplayPageCountAndCurrentLocation = true }, new AjaxOptions() { HttpMethod = "POST", UpdateTargetId = "mgrid", OnComplete = "PagedOnComplete" }))
                @if (Model.Count() == 0)
                {
                    <ul class="pagination pull-right"></ul>
                }
            </div>
        </div>
    </div>  
</div>

<script>

    
    $("#deleteclinet").on("click", function () {
        if (confirm("Press a button!"))
        {           
            $('.clientcheck').each(function () {
                var clientid = $(this).attr("value");
                if ($(this).is(":checked")) {
                    $.ajax({
                        type: 'POST',
                        dataType: 'json',
                        url: '/Master/DeleteClinet',

                        data:
                        {
                            clientid: clientid,

                        },
                        success: function (da) {
                            toastr.success(da);                        
                        },

                        error: function (XMLHttpRequest, textStatus, errorThrown) {

                        }
                    });
                }                
            });                              
        }           
                      
    });       


    $(".cleintlist").on("click", function () {
        var clientid = $(this).attr("id");
        $.ajax({
            url: "@Url.Action("ClientDetails", "BussinessDev")",
            data: { client_id: clientid, },
            dataType: "text",
            //  type: "POST",

            async: false,
            success: function (data) {

                //data3 = data;
                $('#addclientgrid').html(data);
            }
        });
    
      

          $.ajax({
            url: "@Url.Action("ContactPersonDetails", "BussinessDev")",
            contentType: "application/json",
                  data: JSON.stringify({ client_id: clientid }),
            dataType: "text",
            type: "POST",
            async: true,
            success: function (data) {
                $('#grid2').html(data);

            },
            error: function (data) {

            },
            complete: function () {

            }
        });

        $.ajax({
            url: "@Url.Action("CllientLocationDetails", "BussinessDev")",
            contentType: "application/json",
                  data: JSON.stringify({ client_id: clientid }),
            dataType: "text",
            type: "POST",
            async: true,
            success: function (data) {
                $('#clinetlocationdetails').html(data);

            },
            error: function (data) {

            },
            complete: function () {

            }
        });
    })
</script>